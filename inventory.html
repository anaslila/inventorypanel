<!DOCTYPE html>
<html>
<head>
    <title>Inventory Panel v1.92</title>
    <link rel="icon" href="https://projectsmirror.net/wp-content/uploads/2024/02/MICL-Logo-1-281x300.png">
    <style>
        body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .header { background: #4a90e2; color: white; padding: 15px 20px; border-radius: 10px 10px 0 0; display: flex; align-items: center; gap: 15px; }
        .logo { width: 50px; height: 50px; background: white; border-radius: 8px; padding: 5px; }
        .content { padding: 30px; }
        .input-group { margin-bottom: 20px; position: relative; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #333; text-transform: uppercase; font-size: 12px; }
        .input-group input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; }
        .input-group input:focus { border-color: #4a90e2; outline: none; }
        .input-group input[readonly] { background: #f8f8f8; }
        .row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .highlight { background: #E8F4FD !important; border-color: #4a90e2 !important; font-weight: bold; font-size: 16px; color: #2d5a87; }
        .tower-field { background: #4a90e2 !important; color: white !important; text-align: center; font-weight: bold; }
        .suggestions { position: absolute; top: 100%; left: 0; right: 0; background: white; border: 2px solid #4a90e2; border-top: none; border-radius: 0 0 6px 6px; max-height: 200px; overflow-y: auto; z-index: 1000; display: none; }
        .suggestion { padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; }
        .suggestion:hover { background: #f0f8ff; }
        .payment-section { margin: 30px 0; padding: 20px; background: #f9f9f9; border-radius: 8px; display: none; }
        .payment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .payment-title { background: #2d5a87; color: white; padding: 12px 20px; border-radius: 6px; font-weight: bold; flex: 1; text-align: center; }
        .tower-badge { background: #4a90e2; color: white; padding: 12px 20px; border-radius: 6px; font-weight: bold; margin-left: 10px; }
        .payment-table { background: white; border-radius: 6px; overflow: hidden; border: 1px solid #ddd; }
        .payment-row { display: grid; grid-template-columns: 80px 1fr 2fr; }
        .payment-row.header { background: #f5f5f5; font-weight: bold; }
        .payment-row div { padding: 15px; border-bottom: 1px solid #eee; }
        .payment-row:not(.header) .percent { background: #e3f2fd; color: #1976d2; font-weight: bold; text-align: center; }
        .payment-row:not(.header) .amount { color: #2e7d32; font-weight: bold; }
        .notes { background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; padding: 15px; margin: 20px 0; }
        .note-title { font-weight: bold; color: #856404; margin-bottom: 8px; }
        .note-item { color: #856404; font-size: 13px; margin-bottom: 4px; }
        .empty-state { text-align: center; padding: 50px; color: #666; background: #f8f8f8; border-radius: 8px; margin: 20px 0; }
        .error-state { background: #ffebee; border: 1px solid #ffcdd2; border-radius: 6px; padding: 20px; text-align: center; color: #c62828; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://projectsmirror.net/wp-content/uploads/2024/02/MICL-Logo-1-281x300.png" class="logo" alt="MICL Logo">
            <div>
                <h2>Inventory Panel v1.92</h2>
                <p>MICL Property Lookup System</p>
            </div>
        </div>

        <div class="content">
            <div class="input-group">
                <label>Flat Number / Inventory Number</label>
                <input type="text" id="flatInput" placeholder="Type flat number (e.g. A P104)" autocomplete="off">
                <div id="suggestions" class="suggestions"></div>
            </div>

            <div class="row">
                <div class="input-group">
                    <label>Band</label>
                    <input type="text" id="band" readonly>
                </div>
                <div class="input-group">
                    <label>Facing</label>
                    <input type="text" id="facing" readonly>
                </div>
                <div class="input-group">
                    <label>RERA Carpet</label>
                    <input type="text" id="carpet" readonly>
                </div>
                <div class="input-group">
                    <label>Typology</label>
                    <input type="text" id="typology" readonly>
                </div>
            </div>

            <div class="row">
                <div class="input-group">
                    <label>Agreement Value / Flat Cost</label>
                    <input type="text" id="agreementValue" readonly>
                </div>
                <div class="input-group">
                    <label>Stamp Duty</label>
                    <input type="text" id="stampDuty" readonly>
                </div>
                <div class="input-group">
                    <label>GST</label>
                    <input type="text" id="gst" readonly>
                </div>
                <div class="input-group">
                    <label>Reg Amt</label>
                    <input type="text" id="regAmt" readonly>
                </div>
                <div class="input-group">
                    <label>Other Charges</label>
                    <input type="text" id="otherCharges" readonly>
                </div>
            </div>

            <div class="row">
                <div class="input-group" style="grid-column: 1 / -1;">
                    <label>All Inclusive Amount</label>
                    <input type="text" id="allInclusive" class="highlight" readonly>
                </div>
            </div>

            <div class="row">
                <div class="input-group">
                    <label>Possession Charges</label>
                    <input type="text" id="possessionCharges" readonly>
                </div>
                <div class="input-group">
                    <label>Tower</label>
                    <input type="text" id="tower" class="tower-field" readonly>
                </div>
            </div>

            <div id="paymentSection" class="payment-section">
                <div class="payment-header">
                    <div id="paymentTitle" class="payment-title">Payment Plan Breakup (9:11:80)</div>
                    <div id="towerName" class="tower-badge">Aster</div>
                </div>
                <div class="payment-table">
                    <div class="payment-row header">
                        <div>%</div>
                        <div>Amount</div>
                        <div>Milestone</div>
                    </div>
                    <div id="paymentRows"></div>
                </div>
            </div>

            <div class="notes">
                <div class="note-title">*NOTE</div>
                <div class="note-item">*Payment plan is a split of only flat cost</div>
                <div class="note-item">*All the prices are negotiable</div>
                <div class="note-item">*Agreement value is without car park</div>
            </div>

            <div id="emptyState" class="empty-state">
                <h3>Enter Flat Number</h3>
                <p>Type a flat number (e.g., A P104, B 201, C 1501) to view property details</p>
            </div>
        </div>
    </div>

    <script>
        // COMPLETE PROPERTY DATA
        const propertyData = {
            "A P104": {
                band: "1st Band", facing: "West /SIS", carpet: "430 Sq Ft", typology: "1BHK",
                price: 8256000, stampDuty: 577920, gst: 412800, registration: 30000,
                otherCharges: 487900, possessionCharges: 95100, allInclusive: 9859720,
                tower: "Aster", paymentPlan: "9:11:80"
            },
            "A P101": {
                band: "1st Band", facing: "East / SGNP", carpet: "409 Sq Ft", typology: "1BHK",
                price: 7852800, stampDuty: 549696, gst: 392640, registration: 30000,
                otherCharges: 487900, possessionCharges: 90480, allInclusive: 9403516,
                tower: "Aster", paymentPlan: "9:11:80"
            },
            "A P102": {
                band: "1st Band", facing: "East / SGNP", carpet: "625 Sq Ft", typology: "2BHK",
                price: 12000000, stampDuty: 840000, gst: 600000, registration: 30000,
                otherCharges: 637200, possessionCharges: 138000, allInclusive: 14245200,
                tower: "Aster", paymentPlan: "9:11:80"
            },
            "A 101": {
                band: "1st Band", facing: "East / SGNP", carpet: "409 Sq Ft", typology: "1BHK",
                price: 7852800, stampDuty: 549696, gst: 392640, registration: 30000,
                otherCharges: 487900, possessionCharges: 90480, allInclusive: 9403516,
                tower: "Aster", paymentPlan: "9:11:80"
            },
            "A 601": {
                band: "2nd Band", facing: "East / SGNP", carpet: "409 Sq Ft", typology: "1BHK",
                price: 8057300, stampDuty: 564011, gst: 402865, registration: 30000,
                otherCharges: 487900, possessionCharges: 90480, allInclusive: 9632556,
                tower: "Aster", paymentPlan: "9:11:80"
            },
            "B 101": {
                band: "1st Band", facing: "East / SGNP", carpet: "671 Sq Ft", typology: "2BHK",
                price: 12883200, stampDuty: 901824, gst: 644160, registration: 30000,
                otherCharges: 637200, possessionCharges: 148120, allInclusive: 15244504,
                tower: "Blu", paymentPlan: "9:11:80"
            },
            "C 101": {
                band: "1st Band", facing: "East / SGNP", carpet: "452 Sq Ft", typology: "1BHK",
                price: 8678400, stampDuty: 607488, gst: 433920, registration: 30000,
                otherCharges: 487900, possessionCharges: 99940, allInclusive: 10337648,
                tower: "Clove", paymentPlan: "9:91"
            },
            "D 101": {
                band: "1st Band", facing: "East / SGNP", carpet: "655 Sq Ft", typology: "2BHK",
                price: 12576000, stampDuty: 880320, gst: 628800, registration: 30000,
                otherCharges: 637200, possessionCharges: 144600, allInclusive: 14896920,
                tower: "Dion", paymentPlan: "9:91"
            }
        };

        const paymentPlans = {
            "9:11:80": [
                { stage: "On Booking", percentage: 9 },
                { stage: "On Completion of Terrace", percentage: 11 },
                { stage: "On Possession", percentage: 80 }
            ],
            "9:91": [
                { stage: "On Booking", percentage: 9 },
                { stage: "On Occupancy Certificate", percentage: 91 }
            ]
        };

        const towerColors = {
            "Aster": "#4a90e2",
            "Blu": "#5cb85c",
            "Clove": "#f0ad4e",
            "Dion": "#d9534f"
        };

        // Perfect Indian number formatting
        function formatIndianCurrency(amount) {
            if (!amount) return "₹ 0";
            const num = Math.round(amount);
            const numStr = num.toString();
            
            if (numStr.length <= 3) {
                return `₹ ${numStr}`;
            }
            
            const lastThree = numStr.substr(numStr.length - 3);
            const remaining = numStr.substr(0, numStr.length - 3);
            
            let formatted = '';
            for (let i = remaining.length; i > 0; i -= 2) {
                const start = Math.max(0, i - 2);
                const group = remaining.substr(start, i - start);
                formatted = group + (formatted ? ',' + formatted : '');
            }
            
            return `₹ ${formatted},${lastThree}`;
        }

        // Main lookup function
        function lookupProperty() {
            const input = document.getElementById('flatInput').value.trim().toUpperCase();
            const suggestionsDiv = document.getElementById('suggestions');
            const emptyState = document.getElementById('emptyState');
            const paymentSection = document.getElementById('paymentSection');

            // Clear any existing error
            clearError();

            // Show suggestions
            if (input.length > 0) {
                const matches = Object.keys(propertyData).filter(key => 
                    key.includes(input)
                ).slice(0, 8);

                if (matches.length > 0) {
                    suggestionsDiv.innerHTML = matches.map(key => {
                        const prop = propertyData[key];
                        return `<div class="suggestion" onclick="selectProperty('${key}')">
                            ${key} - ${prop.tower} Tower • ${prop.typology} • ${prop.carpet}
                        </div>`;
                    }).join('');
                    suggestionsDiv.style.display = 'block';
                } else {
                    suggestionsDiv.style.display = 'none';
                }
            } else {
                suggestionsDiv.style.display = 'none';
            }

            // Lookup property
            const property = propertyData[input];
            if (property) {
                // Fill all fields
                document.getElementById('band').value = property.band;
                document.getElementById('facing').value = property.facing;
                document.getElementById('carpet').value = property.carpet;
                document.getElementById('typology').value = property.typology;
                document.getElementById('agreementValue').value = formatIndianCurrency(property.price);
                document.getElementById('stampDuty').value = formatIndianCurrency(property.stampDuty);
                document.getElementById('gst').value = formatIndianCurrency(property.gst);
                document.getElementById('regAmt').value = formatIndianCurrency(property.registration);
                document.getElementById('otherCharges').value = formatIndianCurrency(property.otherCharges);
                document.getElementById('possessionCharges').value = formatIndianCurrency(property.possessionCharges);
                document.getElementById('allInclusive').value = formatIndianCurrency(property.allInclusive);
                document.getElementById('tower').value = property.tower;

                // Set tower color
                const towerColor = towerColors[property.tower] || '#4a90e2';
                document.getElementById('tower').style.background = towerColor;

                // Show payment plan
                showPaymentPlan(property);
                
                emptyState.style.display = 'none';
                paymentSection.style.display = 'block';
            } else if (input) {
                clearFields();
                showError(`Property "${input}" not found. Please check the flat number.`);
                emptyState.style.display = 'none';
            } else {
                clearFields();
                emptyState.style.display = 'block';
                paymentSection.style.display = 'none';
            }
        }

        function showPaymentPlan(property) {
            const plan = paymentPlans[property.paymentPlan];
            if (!plan) return;

            document.getElementById('paymentTitle').textContent = `Payment Plan Breakup (${property.paymentPlan})`;
            document.getElementById('towerName').textContent = property.tower;
            
            const towerColor = towerColors[property.tower] || '#4a90e2';
            document.getElementById('towerName').style.background = towerColor;

            const paymentRows = document.getElementById('paymentRows');
            paymentRows.innerHTML = '';

            plan.forEach(stage => {
                const amount = Math.round(property.price * stage.percentage / 100);
                const row = document.createElement('div');
                row.className = 'payment-row';
                row.innerHTML = `
                    <div class="percent">${stage.percentage}%</div>
                    <div class="amount">${formatIndianCurrency(amount)}</div>
                    <div>${stage.stage}</div>
                `;
                paymentRows.appendChild(row);
            });
        }

        function selectProperty(key) {
            document.getElementById('flatInput').value = key;
            document.getElementById('suggestions').style.display = 'none';
            lookupProperty();
        }

        function clearFields() {
            const fields = ['band', 'facing', 'carpet', 'typology', 'agreementValue', 
                          'stampDuty', 'gst', 'regAmt', 'otherCharges', 'possessionCharges', 
                          'allInclusive', 'tower'];
            fields.forEach(field => {
                document.getElementById(field).value = '';
            });
            document.getElementById('tower').style.background = '';
            document.getElementById('paymentSection').style.display = 'none';
        }

        function showError(message) {
            clearError();
            const errorDiv = document.createElement('div');
            errorDiv.id = 'errorMessage';
            errorDiv.className = 'error-state';
            errorDiv.innerHTML = `<h3>Not Found</h3><p>${message}</p>`;
            document.querySelector('.content').appendChild(errorDiv);
            setTimeout(clearError, 5000);
        }

        function clearError() {
            const error = document.getElementById('errorMessage');
            if (error) error.remove();
        }

        // Event listeners
        document.getElementById('flatInput').addEventListener('input', lookupProperty);
        
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.input-group')) {
                document.getElementById('suggestions').style.display = 'none';
            }
        });

        // Initialize
        document.getElementById('emptyState').style.display = 'block';
    </script>
</body>
</html>
