<!DOCTYPE html>
<html>
<head>
    <title>Inventory Panel v1.95 - Working Version</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .header { text-align: center; margin-bottom: 30px; color: #333; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 2px solid #ddd; border-radius: 5px; font-size: 14px; }
        input:focus { border-color: #4a90e2; outline: none; }
        input[readonly] { background: #f8f8f8; }
        .row { display: flex; gap: 15px; margin: 15px 0; }
        .row > div { flex: 1; }
        label { font-weight: bold; color: #666; font-size: 12px; text-transform: uppercase; }
        .suggestions { border: 2px solid #4a90e2; background: white; max-height: 200px; overflow-y: auto; display: none; }
        .suggestion { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; }
        .suggestion:hover { background: #f0f8ff; }
        .highlight { background: #e8f4f8 !important; font-weight: bold; font-size: 16px; text-align: center; }
        .tower { background: #4a90e2 !important; color: white !important; text-align: center; font-weight: bold; }
        .payment { background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0; display: none; }
        .payment-table { background: white; border: 1px solid #ddd; }
        .payment-row { display: flex; }
        .payment-row div { padding: 12px; border-right: 1px solid #ddd; flex: 1; text-align: center; }
        .payment-header { background: #f5f5f5; font-weight: bold; }
        .footer { text-align: center; margin-top: 30px; color: #999; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ Inventory Panel v1.95</h1>
            <p>MICL Property System</p>
        </div>

        <div style="position: relative;">
            <label>FLAT NUMBER</label>
            <input id="flat" placeholder="Type: A P104, D 2601, etc." onkeyup="search()">
            <div id="suggestions" class="suggestions"></div>
        </div>

        <div class="row">
            <div><label>BAND</label><input id="band" readonly></div>
            <div><label>FACING</label><input id="facing" readonly></div>
            <div><label>CARPET</label><input id="carpet" readonly></div>
            <div><label>TYPE</label><input id="type" readonly></div>
        </div>

        <div class="row">
            <div><label>PRICE</label><input id="price" readonly></div>
            <div><label>STAMP</label><input id="stamp" readonly></div>
            <div><label>GST</label><input id="gst" readonly></div>
            <div><label>REG</label><input id="reg" readonly></div>
        </div>

        <div>
            <label>TOTAL AMOUNT</label>
            <input id="total" class="highlight" readonly>
        </div>

        <div class="row">
            <div><label>POSSESSION</label><input id="possess" readonly></div>
            <div><label>TOWER</label><input id="tower" class="tower" readonly></div>
        </div>

        <div id="payment" class="payment">
            <h3 id="plan-title">Payment Plan</h3>
            <div class="payment-table">
                <div class="payment-row payment-header">
                    <div>%</div><div>Amount</div><div>Stage</div>
                </div>
                <div id="plan-rows"></div>
            </div>
        </div>

        <div class="footer">
            Created by <strong>Anas Lila</strong> ‚Ä¢ v1.95 ‚Ä¢ 2025
        </div>
    </div>

    <script>
        const units = ["A P101","A P102","A P103","A P104","A P105","A P106","A 101","A 102","A 601","A 2401","A 2601","B 101","B 102","B 601","B 2401","B 2601","C 101","C 102","C 601","C 2401","C 2601","D 101","D 102","D 601","D 2401","D 2601","D 2701","D 2801","D 2901","D 3001"];
        
        const data = {
            "A P104": {band:"1st Band",face:"West/SIS",carpet:"430 Sq Ft",type:"1BHK",price:8256000,stamp:577920,gst:412800,reg:30000,possess:95100,total:9859720,tower:"Aster"},
            "A P101": {band:"1st Band",face:"East/SGNP",carpet:"409 Sq Ft",type:"1BHK",price:7852800,stamp:549696,gst:392640,reg:30000,possess:90480,total:9403516,tower:"Aster"},
            "A 601": {band:"2nd Band",face:"East/SGNP",carpet:"409 Sq Ft",type:"1BHK",price:8057300,stamp:564011,gst:402865,reg:30000,possess:90480,total:9632556,tower:"Aster"},
            "A 2601": {band:"3rd Band",face:"East/SGNP",carpet:"409 Sq Ft",type:"1BHK",price:8466300,stamp:592641,gst:423315,reg:30000,possess:90480,total:10090636,tower:"Aster"},
            "B 101": {band:"1st Band",face:"East/SGNP",carpet:"671 Sq Ft",type:"2BHK",price:12883200,stamp:901824,gst:644160,reg:30000,possess:148120,total:15244504,tower:"Blu"},
            "B 2601": {band:"3rd Band",face:"East/SGNP",carpet:"671 Sq Ft",type:"2BHK",price:13889700,stamp:972279,gst:694485,reg:30000,possess:148120,total:16462584,tower:"Blu"},
            "C 101": {band:"1st Band",face:"East/SGNP",carpet:"452 Sq Ft",type:"1BHK",price:8678400,stamp:607488,gst:433920,reg:30000,possess:99940,total:10337648,tower:"Clove"},
            "C 2601": {band:"3rd Band",face:"East/SGNP",carpet:"452 Sq Ft",type:"1BHK",price:9356400,stamp:654948,gst:467820,reg:30000,possess:99940,total:11145508,tower:"Clove"},
            "D 101": {band:"1st Band",face:"East/SGNP",carpet:"655 Sq Ft",type:"2BHK",price:12576000,stamp:880320,gst:628800,reg:30000,possess:144600,total:14896920,tower:"Dion"},
            "D 2601": {band:"3rd Band",face:"East/SGNP",carpet:"655 Sq Ft",type:"2BHK",price:13558000,stamp:949060,gst:677900,reg:30000,possess:144600,total:15997760,tower:"Dion"}
        };

        function money(n) {
            if (!n) return "";
            let s = n.toString();
            let result = "";
            let count = 0;
            for (let i = s.length - 1; i >= 0; i--) {
                if (count === 3) {
                    result = "," + result;
                    count = 0;
                } else if (count > 3 && count % 2 === 1) {
                    result = "," + result;
                }
                result = s[i] + result;
                count++;
            }
            return "‚Çπ " + result;
        }

        function search() {
            const input = document.getElementById('flat').value.toUpperCase();
            const box = document.getElementById('suggestions');
            
            if (!input) {
                box.style.display = 'none';
                clear();
                return;
            }

            const matches = units.filter(u => u.includes(input));
            
            if (matches.length > 0) {
                box.innerHTML = matches.map(u => 
                    `<div class="suggestion" onclick="select('${u}')">${u} - ${data[u] ? data[u].tower + ' ' + data[u].type : 'Available'}</div>`
                ).join('');
                box.style.display = 'block';
            } else {
                box.style.display = 'none';
            }

            const item = data[input];
            if (item) {
                document.getElementById('band').value = item.band;
                document.getElementById('facing').value = item.face;
                document.getElementById('carpet').value = item.carpet;
                document.getElementById('type').value = item.type;
                document.getElementById('price').value = money(item.price);
                document.getElementById('stamp').value = money(item.stamp);
                document.getElementById('gst').value = money(item.gst);
                document.getElementById('reg').value = money(item.reg);
                document.getElementById('possess').value = money(item.possess);
                document.getElementById('total').value = money(item.total);
                document.getElementById('tower').value = item.tower;
                
                showPlan(item);
            }
        }

        function select(unit) {
            document.getElementById('flat').value = unit;
            document.getElementById('suggestions').style.display = 'none';
            search();
        }

        function clear() {
            ['band','facing','carpet','type','price','stamp','gst','reg','possess','total','tower'].forEach(id => 
                document.getElementById(id).value = ''
            );
            document.getElementById('payment').style.display = 'none';
        }

        function showPlan(item) {
            const plan = [
                {per: 9, stage: "On Booking"},
                {per: 11, stage: "On Terrace Complete"},
                {per: 80, stage: "On Possession"}
            ];

            document.getElementById('plan-title').textContent = `Payment Plan - ${item.tower}`;
            const rows = document.getElementById('plan-rows');
            rows.innerHTML = plan.map(p => {
                const amt = Math.round(item.price * p.per / 100);
                return `<div class="payment-row"><div>${p.per}%</div><div>${money(amt)}</div><div>${p.stage}</div></div>`;
            }).join('');
            document.getElementById('payment').style.display = 'block';
        }

        document.addEventListener('click', e => {
            if (!e.target.closest('div[style*="relative"]')) {
                document.getElementById('suggestions').style.display = 'none';
            }
        });
    </script>
</body>
</html>
